package br.com.ifsp.livraria.gui;

import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;

import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFormattedTextField;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.text.MaskFormatter;

import br.com.ifsp.livraria.enums.Categoria;

public class TelaCadastroDeLivros {
	public TelaCadastroDeLivros() {
		JFrame telaCadastroLivro = new JFrame("Cadastro de Livros");
		telaCadastroLivro.setSize(500, 400);
		telaCadastroLivro.setLocationRelativeTo(null); // Centro da tela
		telaCadastroLivro
				.setDefaultCloseOperation(telaCadastroLivro.HIDE_ON_CLOSE);
		telaCadastroLivro.setBackground(Color.CYAN);

		// painel Livro
		JPanel painelCadLivro = new JPanel();
		painelCadLivro.setSize(800, 600);
		// rotulo e textbox

		// Label avisando sobre gravar com sucesso.
		JLabel sucesso = new JLabel("");
		sucesso.setBounds(150, 250, 220, 120);

		JLabel rotISBN = new JLabel("ISBN: ");
		JTextField txtISBN = new JTextField(10);
		rotISBN.setLabelFor(txtISBN);
		rotISBN.setBounds(50, 20, 80, 20);
		txtISBN.setBounds(170, 20, 80, 20);

		JLabel rotTit = new JLabel("Titulo: ");
		JTextField txtTit = new JTextField(100);
		rotTit.setLabelFor(txtTit);
		rotTit.setBounds(50, 60, 80, 20);
		txtTit.setBounds(170, 60, 200, 20);

		// Autores
		JLabel rotAut = new JLabel("Autor: ");
		JTextField txtAut = new JTextField(100);
		rotAut.setLabelFor(txtAut);
		rotAut.setBounds(50, 100, 80, 20);
		txtAut.setBounds(170, 100, 200, 20);

		JLabel rotEed = new JLabel("Editora: ");
		JTextField txtEd = new JTextField(100);
		rotEed.setLabelFor(txtEd);
		rotEed.setBounds(50, 140, 80, 20);
		txtEd.setBounds(170, 140, 80, 20);

		//TODO Format DateTime!!!
		DateFormat format = new SimpleDateFormat("dd--MM--yyyy");
		JLabel rotDataPublica = new JLabel("Data de Publicação: ");
		JFormattedTextField txtDataPublica = new JFormattedTextField(format);
		rotDataPublica.setLabelFor(txtDataPublica);
		rotDataPublica.setBounds(50, 180, 120, 20);
		txtDataPublica.setBounds(170, 180, 80, 20);
		
		MaskFormatter maskData;
		try {
			maskData = new MaskFormatter("##/##/####");
			maskData.install(txtDataPublica);
		} catch (ParseException e1) {
			e1.printStackTrace();
		}  
		

		JLabel rotCategoria = new JLabel("Categoria: ");
		Categoria[] values = Categoria.values();
		
		JComboBox cboxCategoria = new JComboBox(values);
		rotCategoria.setLabelFor(cboxCategoria);
		rotCategoria.setBounds(50, 220, 120, 20);
		cboxCategoria.setBounds(170, 220, 80, 20);
		cboxCategoria.setSelectedIndex(-1);

		// Buttons
		JButton btnSalvar = new JButton("Salvar");
		btnSalvar.setBounds(130, 260, 90, 20);

		JButton btnCancelar = new JButton("Cancelar");
		btnCancelar.setBounds(240, 260, 90, 20);

		// Listeners
		btnSalvar.addActionListener(new ActionListener() {

			@Override
			public void actionPerformed(ActionEvent arg0) {
				// LivroDAO e
				System.out.println("INSERT INTO BD");
			}
		});
		
		btnCancelar.addActionListener(new ActionListener() {
			
			@Override
			public void actionPerformed(ActionEvent e) {
				txtAut.setText("");
				txtDataPublica.setText("");
				
				
				telaCadastroLivro.dispose();
			}
		});

		// Add components
		painelCadLivro.add(rotISBN);
		painelCadLivro.add(txtISBN);

		painelCadLivro.add(rotTit);
		painelCadLivro.add(txtTit);

		painelCadLivro.add(rotAut);
		painelCadLivro.add(txtAut);

		painelCadLivro.add(rotEed);
		painelCadLivro.add(txtEd);

		painelCadLivro.add(rotDataPublica);
		painelCadLivro.add(txtDataPublica);

		painelCadLivro.add(rotCategoria);
		painelCadLivro.add(cboxCategoria);
		
		painelCadLivro.add(btnSalvar);
		painelCadLivro.add(btnCancelar);
		painelCadLivro.add(sucesso);
		
		
		painelCadLivro.setLayout(null);
		
		telaCadastroLivro.add(painelCadLivro);
		painelCadLivro.setVisible(true);
		telaCadastroLivro.setVisible(true);
		telaCadastroLivro.setResizable(false);

	}
	
}
